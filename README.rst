
===========================
Sage DnD  Module Repository
===========================

This is simple project to play with the statistics of DnD attribute rolls.


Usage
-----

Within the SageMath environment, the basic usage is illustrated by the following:

    sage: import sagednd.dnd_ability_rolls as dnd                                           
    sage: get_dnd_ability_rolls = dnd.get_dnd_ability_rolls     
    sage: dnd_ability_roll_score = dnd.dnd_ability_roll_score
    sage: rolls = get_dnd_ability_rolls()                                             
    sage: roll_scores = [dnd_ability_roll_score(r) for r in rolls]

    sage: import sagednd.abstract_fitting as af
    sage: tune = af.tune
    sage: loss_function = af.loss_function

    sage: square_error(err) = err^2                                         
    sage: v = [1,2,3,4,5]                                                   
    sage: f(x,a,b,c) = 3*x*a + 2*b + c                                      
    sage: p_l = f.args()[1:]                                                
    sage: s_p = matrix([[3],[1],[4]])                                       
    sage: s_p_dict = {str(p):v for p,v in zip(p_l, s_p.list())}             
    sage: s_f = f(x,**s_p_dict)                                             
    sage: t_p = tune(v, square_error, f, p_l, s_p, 0.0022, 4)[0]
    sage: t_p_dict = {str(p):v for p,v in zip(p_l, t_p.list())}             
    sage: t_f = f(x,**t_p_dict)                                             
    sage: loss_function(v, square_error, s_f), loss_function(v, square_error, t_f)

Features
--------

It's got it all, everything, the full monty! ...and yet minimal...

Demonstration
-------------

The Jupyter Notebook

    jupyter notebook sagednd_demo.ipynb

contains example code and some data visualizations.

Installation
------------

    python setup.py install --user

Documentation
-------------

In addition to this file (./README.rst), the documentation is generated by Sphinx. From within ./docs run

    make html

This will make a file called ./docs/_build/html/index.html that is the html entry point to the documentation.

Maintence simply requires adding automodule entries as needed.

Copyright & License
-------------------

The project has the GNU GENERAL PUBLIC LICENSE found in the file LICENSE.

Version Control
---------------

./ is a Git repository.

MAINTENANCE: Follow
        'Git Tutorial for Beginners: Command-Line Fundamentals' 
by Corey Shafer.

    $ git add -A
    $ git commit
    $ git push origin master

CREATION: It was created by making a .gitignore file and then entering

    $ git init
    $ git add .
    $ git commit -m "First commit"
    $ git config --global core.editor "emacs -nw"
    $ git commit -a

(
INSTALLATION: ...

INITIALIZATION:
$ git config --global user.name "Patrick Clarke" &&
$ git config --global user.email "pattyclarke@gmail.com"
)
 
Environment
-----------

There is an ./environment.yml file.

MAINTENANCE: None.

CREATION: It was was made by 

    $ conda config --add channels conda-forge
    $ conda create --name sagednd sage
    $ source activate sagednd
    $ conda env export > environment.yml

and setup with:

    $ conda env create -f environment.yml

Management
----------

For SAGE CODE files, the Makefile allows make to take .sage files in ./ and "preparse" them into .py files in ./sagednd:

    make preparsed

creates ./sagednd/dnd_ability_rolls.py from ./dnd_ability_rolls.sage, and ./sagednd/abstract_fitting.py from ./abstract_fitting.sage

There is also a version of 'make preparsed' for SAGE TEST files in the ./tests/ directory.

Testing
-------

PYTEST: With pytest, we can run

    python -m pytest

This runs the tests in ./tests/

SAGE TEST: Sages version of doctest can be run by

    sage -t dnd_ability_rolls.sage
    sage -t abstract_fitting.sage


Project Structure
-----------------

- Code:
  - ./dnd_ability_rolls.sage
  - ./sagednd/dnd_ability_rolls.py
  - ./abstract_fitting.sage
  - ./sagednd/abstract_fitting.py
    
- Data & Serialization:
  - ./dnd_ability_rolls.json

- Demonstration:
  - ./sagednd_demo.ipynb

- Installation:
  - ./setup.py

- Documentation:
  - ./README.rst
  - ./docs/index.rst
  - ./docs/config.py
  - ./docs/_build/html/index.html

- Legal:
  - ./LICENSE

- Version Control:
  - ./.gitignore
    
- Environment:
  - ./environment.yml
  
- Management:
  - ./Makefile
  - ./tests/Makefile
  
- Tests:
  - ./tests/context.py
  - ./tests/test_dnd.py
  - ./tests/test_dnd_ability_rolls.sage
  - ./tests/test_dnd_ability_rolls.py
  - ./tests/test_abstract_fitting.sage
  - ./tests/test_abstract_fitting.py

